{#
Copyright 2024, 2025 New Vector Ltd.
Copyright 2021-2024 The Matrix.org Foundation C.I.C.

SPDX-License-Identifier: AGPL-3.0-only OR LicenseRef-Element-Commercial
Please see LICENSE files in the repository root for full details.
-#}

{% extends "base.html" %}

{% block content %}
  <main class="flex flex-col justify-center gap-6">
    <header class="page-heading">
      <!-- logo MAS tchap -->
      <div class="flex justify-center mb-4">
        <svg width="104" height="100" viewBox="0 0 104 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M81.4386 32.96C81.4386 28.8798 81.4386 26.8397 80.8457 25.013C80.321 23.3967 79.4628 21.9086 78.3266 20.6449C77.0425 19.2168 75.2767 18.195 71.7451 16.1515L50.7071 3.97775C47.1641 1.92763 45.3927 0.902566 43.5089 0.50139C41.8422 0.146435 40.1194 0.146435 38.4526 0.50139C36.5689 0.902566 34.7974 1.92763 31.2545 3.97775L10.2164 16.1515C6.68484 18.195 4.91906 19.2168 3.63494 20.6449C2.49874 21.9086 1.64054 23.3967 1.1159 25.013C0.522949 26.8397 0.522949 28.8798 0.522949 32.96V57.4046C0.522949 61.4774 0.522949 63.5138 1.11405 65.3379C1.63706 66.9519 2.49265 68.4384 3.6256 69.7013C4.90603 71.1286 6.66694 72.1514 10.1888 74.1971L23.7712 82.0864C24.698 82.6248 25.1614 82.8939 25.4983 83.2695C25.7965 83.6019 26.0216 83.993 26.1593 84.4178C26.3148 84.8978 26.3148 85.4337 26.3148 86.5055V93.4248C26.3148 95.7213 26.3148 96.8695 26.7971 97.5339C27.2178 98.1135 27.8646 98.4875 28.5767 98.563C29.3932 98.6496 30.3884 98.0768 32.3787 96.9313L45.8013 89.206L71.7457 74.1919C75.2771 72.1483 77.0428 71.1265 78.3268 69.6984C79.4629 68.4348 80.3211 66.9468 80.8457 65.3305C81.4386 63.5038 81.4386 61.4638 81.4386 57.3838V32.96Z" fill="#2845C1"/>
        <g filter="url(#filter0_d_240_158)">
        <path d="M66.6047 34.5438C66.6047 33.127 66.6047 32.4187 66.3988 31.7844C66.2167 31.2232 65.9187 30.7065 65.5242 30.2677C65.0783 29.7718 64.4652 29.4171 63.2389 28.7075L44.3586 17.7823C43.1284 17.0705 42.5134 16.7146 41.8593 16.5753C41.2805 16.452 40.6823 16.452 40.1036 16.5753C39.4495 16.7146 38.8344 17.0705 37.6043 17.7823L18.7239 28.7075C17.4977 29.4171 16.8846 29.7718 16.4387 30.2677C16.0442 30.7065 15.7462 31.2232 15.564 31.7844C15.3582 32.4187 15.3582 33.127 15.3582 34.5438V56.391C15.3582 57.8179 15.3582 58.5314 15.5666 59.1693C15.751 59.7336 16.0526 60.2527 16.4516 60.6924C16.9026 61.1894 17.5225 61.5426 18.7621 62.2492L37.6425 73.0103C38.8596 73.7041 39.4682 74.0509 40.1144 74.1868C40.6862 74.307 41.2767 74.307 41.8485 74.1868C42.4947 74.0509 43.1032 73.7041 44.3204 73.0103L63.2007 62.2492C64.4404 61.5426 65.0603 61.1894 65.5113 60.6924C65.9103 60.2527 66.2119 59.7336 66.3963 59.1693C66.6047 58.5314 66.6047 57.8179 66.6047 56.391V34.5438Z" fill="white"/>
        </g>
        <path d="M38.5183 36.0308H42.934V61.7292H38.5183V36.0308Z" fill="#C83F49"/>
        <path d="M30.4765 44.5569H26.0608V33.8184H56.4499V38.2416H30.4765V44.5569Z" fill="#C83F49"/>
        <path d="M85.9391 100C85.5629 100 85.0096 99.8581 84.4784 99.5503C72.6152 92.6605 68.4321 89.4406 68.4321 81.4143V64.8408C68.4321 62.0944 69.406 61.0526 71.575 60.0819C73.7883 59.1112 81.4462 56.199 83.6152 55.465C84.3456 55.2282 85.2087 55.0625 85.9391 55.0625C86.6916 55.0625 87.5548 55.2282 88.2852 55.465C90.4542 56.2226 98.09 59.0875 100.325 60.0819C102.494 61.0763 103.468 62.0944 103.468 64.8408V81.4143C103.468 89.4406 99.4401 92.9683 87.422 99.5503C86.8687 99.8344 86.3375 100 85.9391 100Z" fill="#34C759"/>
        <path d="M79.1538 84.3032C79.1538 85.8654 79.8527 86.5643 81.2916 86.5643H91.508C92.9264 86.5643 93.6253 85.8654 93.6253 84.3032V76.4713C93.6253 75.0941 93.0702 74.3952 91.9602 74.2718V72.0312C91.9602 68.29 89.7196 65.8027 86.3895 65.8027C83.08 65.8027 80.8188 68.29 80.8188 72.0312V74.2513C79.7088 74.3952 79.1538 75.0941 79.1538 76.4713V84.3032ZM83.3267 74.2102V71.8257C83.3267 69.6673 84.5395 68.2283 86.3895 68.2283C88.2396 68.2283 89.4524 69.6467 89.4524 71.8257V74.2102H83.3267Z" fill="white"/>
        <defs>
        <filter id="filter0_d_240_158" x="12.0576" y="15.9328" width="57.8476" height="64.395" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="2.75042"/>
        <feGaussianBlur stdDeviation="1.65025"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.0470588 0 0 0 0 0.0470588 0 0 0 0 0.0509804 0 0 0 0.08 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_240_158"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_240_158" result="shape"/>
        </filter>
        </defs>
        </svg>
      </div>
      <!-- logo MAS tchap -->
      <div class="header">
        <h1 class="title">Authentification à {{ _("app.human_name") }}</h1>
        <!--
        <p class="text">
          {{ _("app.technical_description", discovery_url=discovery_url) }}
        </p>
        -->
        <p class="text">
            Tchap utilise désormais un service d'authentification plus robuste et standardisé pour sécuriser davantage vos échanges. Continuer pour accèder à votre compte Tchap.
        </p>
      </div>
    </header>

    {% if current_session is not none %}
      <p class="cpd-text-body-md-regular">
        {{ _("mas.navbar.signed_in_as", username=current_session.user.username) }}
      </p>
      <!--
        {{ button.link(text=_("mas.navbar.my_account"), href="/account/") }}
        -->
        {{ button.link(text="Continuer dans Tchap", href=tchap_app_link) }}
      <!--    
        do not show Tchap Windows before official release     
        {{ button.link(text="Continuer dans Tchap Windows", href="tchap://connect") }}
      -->        
        {{ logout.button(text=_("action.sign_out"), csrf_token=csrf_token) }} 
    {% else %}
      {{ button.link(text="Continuer dans Tchap", href=tchap_app_link) }}
      <!-- 
        do not show Tchap Windows before official release     
        {{ button.link(text="Continuer dans Tchap Windows", href="tchap://connect") }} 
      -->
    {% endif %}
  </main>
{% endblock content %}
